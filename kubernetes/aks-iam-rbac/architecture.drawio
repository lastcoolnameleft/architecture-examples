<mxfile host="app.diagrams.net" modified="2026-02-13T00:00:00.000Z" agent="5.0" version="24.0.0" etag="AKS-IAM-Architecture" type="device">
  <diagram name="AKS IAM Architecture" id="aks-iam-arch">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="AKS IAM Posture Architecture - Persona-Based RBAC" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>
        
        <!-- Entra ID Cloud Layer -->
        <mxCell id="entra-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="720" height="320" as="geometry" />
        </mxCell>
        <mxCell id="entra-title" value="Microsoft Entra ID (Azure AD)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="300" height="30" as="geometry" />
        </mxCell>
        
        <!-- PIM Box -->
        <mxCell id="pim-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="80" y="140" width="320" height="220" as="geometry" />
        </mxCell>
        <mxCell id="pim-title" value="Privileged Identity Management (PIM)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="90" y="150" width="300" height="30" as="geometry" />
        </mxCell>
        
        <!-- PIM Features -->
        <mxCell id="pim-feat1" value="â± Max Duration: 4-8 hours" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="190" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pim-feat2" value="âœ“ Approval Required (L2/L3)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="215" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pim-feat3" value="ðŸ“‹ Justification Required" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="240" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pim-feat4" value="ðŸŽ« Ticket Number Required" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="265" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pim-feat5" value="ðŸ”” Notify Security Team" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="290" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pim-feat6" value="ðŸ“Š Access Reviews: Quarterly" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="315" width="280" height="20" as="geometry" />
        </mxCell>
        
        <!-- Entra ID Groups -->
        <mxCell id="groups-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="440" y="140" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="groups-title" value="Entra ID Security Groups" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="450" y="150" width="260" height="30" as="geometry" />
        </mxCell>
        
        <!-- Group Items -->
        <mxCell id="group1" value="ðŸ”´ InfraOps-L2-Elevated" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="190" width="240" height="25" as="geometry" />
        </mxCell>
        <mxCell id="group2" value="ðŸ”´ PlatformSRE-L3-Elevated" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="220" width="240" height="25" as="geometry" />
        </mxCell>
        <mxCell id="group3" value="ðŸŸ¡ AppSupport-L2-Elevated" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="250" width="240" height="25" as="geometry" />
        </mxCell>
        <mxCell id="group4" value="ðŸŸ¡ CommandCentre-L1-Elevated" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="280" width="240" height="25" as="geometry" />
        </mxCell>
        <mxCell id="group5" value="ðŸŸ¡ CloudDeployment-Elevated" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="310" width="240" height="25" as="geometry" />
        </mxCell>
        <mxCell id="group6" value="ðŸŸ¢ ClusterViewer (Standing)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="340" width="240" height="25" as="geometry" />
        </mxCell>
        
        <!-- Arrow from PIM to Groups -->
        <mxCell id="arrow-pim-groups" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="pim-box" target="groups-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-pim-label" value="JIT Activation" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1" vertex="1" connectable="0" parent="arrow-pim-groups">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- AKS Cluster Layer -->
        <mxCell id="aks-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="40" y="440" width="1520" height="720" as="geometry" />
        </mxCell>
        <mxCell id="aks-title" value="Azure Kubernetes Service (AKS) Cluster" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="450" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- Kubernetes RBAC Box -->
        <mxCell id="k8s-rbac-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="80" y="500" width="720" height="280" as="geometry" />
        </mxCell>
        <mxCell id="k8s-rbac-title" value="Kubernetes RBAC Layer" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="90" y="510" width="700" height="30" as="geometry" />
        </mxCell>
        
        <!-- Cluster-Scoped Roles -->
        <mxCell id="cluster-roles-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="100" y="560" width="320" height="200" as="geometry" />
        </mxCell>
        <mxCell id="cluster-roles-title" value="Cluster-Scoped (ClusterRoles)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="110" y="565" width="300" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="clusterrole1" value="cluster-admin&#xa;(Built-in Full Access)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#b85450;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="120" y="600" width="280" height="35" as="geometry" />
        </mxCell>
        <mxCell id="clusterrole1-groups" value="â†’ InfraOps L2, Platform SRE L3" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="130" y="638" width="260" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="clusterrole2" value="system-namespace-operator&#xa;(kube-system Access)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#b85450;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="120" y="665" width="280" height="35" as="geometry" />
        </mxCell>
        <mxCell id="clusterrole2-groups" value="â†’ InfraOps L2, Platform SRE L3" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="130" y="703" width="260" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="clusterrole3" value="cluster-readonly&#xa;(Read-Only Visibility)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="120" y="730" width="280" height="35" as="geometry" />
        </mxCell>
        <mxCell id="clusterrole3-groups" value="â†’ ClusterViewer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="130" y="750" width="260" height="15" as="geometry" />
        </mxCell>
        
        <!-- Namespace-Scoped Roles -->
        <mxCell id="ns-roles-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="460" y="560" width="320" height="200" as="geometry" />
        </mxCell>
        <mxCell id="ns-roles-title" value="Namespace-Scoped (Roles)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="470" y="565" width="300" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="nsrole1" value="app-namespace-operator&#xa;(Full Ops in App NS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#d79b00;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="480" y="600" width="280" height="35" as="geometry" />
        </mxCell>
        <mxCell id="nsrole1-groups" value="â†’ App Support L2" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="490" y="638" width="260" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="nsrole2" value="l1-restricted-operator&#xa;(Read-Only in App NS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#d79b00;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="480" y="665" width="280" height="35" as="geometry" />
        </mxCell>
        <mxCell id="nsrole2-groups" value="â†’ Command Centre L1, ClusterViewer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="490" y="703" width="260" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="nsrole3" value="project-deployment-temp&#xa;(Deployment-Focused)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#d79b00;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="480" y="730" width="280" height="35" as="geometry" />
        </mxCell>
        <mxCell id="nsrole3-groups" value="â†’ Cloud Deployment" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="490" y="750" width="260" height="15" as="geometry" />
        </mxCell>
        
        <!-- Namespaces -->
        <mxCell id="namespaces-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="840" y="500" width="680" height="280" as="geometry" />
        </mxCell>
        <mxCell id="namespaces-title" value="Kubernetes Namespaces &amp; Workloads" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="850" y="510" width="660" height="30" as="geometry" />
        </mxCell>
        
        <!-- kube-system namespace -->
        <mxCell id="kube-system-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="860" y="560" width="300" height="200" as="geometry" />
        </mxCell>
        <mxCell id="kube-system-title" value="kube-system (System)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="870" y="565" width="280" height="25" as="geometry" />
        </mxCell>
        <mxCell id="kube-system-content" value="âš™ï¸ CoreDNS&#xa;âš™ï¸ kube-proxy&#xa;âš™ï¸ azure-cni&#xa;âš™ï¸ metrics-server&#xa;âš™ï¸ cluster-autoscaler&#xa;&#xa;ðŸ”’ Access: L2/L3 Only" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="880" y="595" width="260" height="155" as="geometry" />
        </mxCell>
        
        <!-- App namespaces -->
        <mxCell id="app-ns-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1200" y="560" width="300" height="200" as="geometry" />
        </mxCell>
        <mxCell id="app-ns-title" value="Application Namespaces" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1210" y="565" width="280" height="25" as="geometry" />
        </mxCell>
        <mxCell id="app-ns-content" value="ðŸ“¦ Deployments&#xa;ðŸ“¦ StatefulSets&#xa;ðŸ“¦ Services&#xa;ðŸ“¦ ConfigMaps&#xa;ðŸ” Secrets&#xa;&#xa;âœ… App Support L2: R/W/X&#xa;ðŸ‘ Command Centre L1: R&#xa;ðŸš€ Cloud Deployment: Deploy" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1220" y="595" width="260" height="155" as="geometry" />
        </mxCell>
        
        <!-- Arrows from Groups to K8s RBAC -->
        <mxCell id="arrow-groups-k8s" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#666666;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="groups-box" target="k8s-rbac-bg">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="580" y="370" as="sourcePoint" />
            <mxPoint x="440" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-groups-label" value="Entra ID Group Object IDs&#xa;Referenced in RoleBindings" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontStyle=1;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="arrow-groups-k8s">
          <mxGeometry x="0.2" y="2" relative="1" as="geometry">
            <mxPoint x="50" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrows from Roles to Namespaces -->
        <mxCell id="arrow-cluster-to-ns" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;dashed=1;" edge="1" parent="1" source="cluster-roles-box" target="kube-system-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-ns-to-app" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;dashed=1;" edge="1" parent="1" source="ns-roles-box" target="app-ns-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Log Analytics -->
        <mxCell id="log-analytics-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="80" y="820" width="720" height="320" as="geometry" />
        </mxCell>
        <mxCell id="log-analytics-title" value="Azure Log Analytics Workspace" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="90" y="830" width="700" height="30" as="geometry" />
        </mxCell>
        
        <!-- Audit Log Categories -->
        <mxCell id="audit-cat1" value="ðŸ“Š kube-audit (AKSAuditAdmin)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#9673a6;fontSize=12;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="880" width="320" height="35" as="geometry" />
        </mxCell>
        <mxCell id="audit-cat1-desc" value="All API server calls, RBAC decisions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;spacingLeft=20;" vertex="1" parent="1">
          <mxGeometry x="100" y="915" width="320" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="audit-cat2" value="ðŸ“Š kube-apiserver" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#9673a6;fontSize=12;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="945" width="320" height="35" as="geometry" />
        </mxCell>
        <mxCell id="audit-cat2-desc" value="API server component logs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;spacingLeft=20;" vertex="1" parent="1">
          <mxGeometry x="100" y="980" width="320" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="audit-cat3" value="ðŸ“Š guard (Entra ID Authentication)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#9673a6;fontSize=12;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="1010" width="320" height="35" as="geometry" />
        </mxCell>
        <mxCell id="audit-cat3-desc" value="AAD authentication events, token validation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;spacingLeft=20;" vertex="1" parent="1">
          <mxGeometry x="100" y="1045" width="320" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="audit-cat4" value="ðŸ“Š cluster-autoscaler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#9673a6;fontSize=12;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="1075" width="320" height="35" as="geometry" />
        </mxCell>
        <mxCell id="audit-cat4-desc" value="Node scaling decisions and events" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;spacingLeft=20;" vertex="1" parent="1">
          <mxGeometry x="100" y="1110" width="320" height="20" as="geometry" />
        </mxCell>
        
        <!-- Retention Info -->
        <mxCell id="retention-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="460" y="880" width="320" height="250" as="geometry" />
        </mxCell>
        <mxCell id="retention-title" value="Retention &amp; Compliance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="470" y="890" width="300" height="25" as="geometry" />
        </mxCell>
        <mxCell id="retention-info" value="â± Retention: 90 days&#xa;&#xa;ðŸ“‹ Log Destination: Dedicated&#xa;    (Resource-specific tables)&#xa;&#xa;ðŸ” Query Language: KQL&#xa;&#xa;ðŸ“Š Tables:&#xa;  â€¢ AKSAuditAdmin&#xa;  â€¢ AKSControl&#xa;  â€¢ ContainerLog&#xa;&#xa;âœ… Compliance Ready:&#xa;  â€¢ SOC 2&#xa;  â€¢ ISO 27001&#xa;  â€¢ HIPAA&#xa;  â€¢ PCI DSS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="480" y="920" width="280" height="200" as="geometry" />
        </mxCell>
        
        <!-- Arrow from AKS to Log Analytics -->
        <mxCell id="arrow-aks-logs" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#9673a6;" edge="1" parent="1" source="aks-bg" target="log-analytics-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="780" as="sourcePoint" />
            <mxPoint x="440" y="820" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-logs-label" value="Diagnostic Settings&#xa;(All API Calls)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontStyle=1;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="arrow-aks-logs">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint y="10" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Personas/Users Box -->
        <mxCell id="personas-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="840" y="820" width="680" height="320" as="geometry" />
        </mxCell>
        <mxCell id="personas-title" value="Operational Personas" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="850" y="830" width="660" height="30" as="geometry" />
        </mxCell>
        
        <!-- Persona Grid -->
        <mxCell id="persona1" value="ðŸ‘¤ Infra Ops (L2)&#xa;Cluster Admin" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="880" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="persona1-desc" value="â€¢ Node management&#xa;â€¢ System namespaces&#xa;â€¢ Full cluster access" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="860" y="935" width="200" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="persona2" value="ðŸ‘¤ Platform SRE (L3)&#xa;Cluster Admin" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1080" y="880" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="persona2-desc" value="â€¢ Deep troubleshooting&#xa;â€¢ Cluster upgrades&#xa;â€¢ Add-on management" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1080" y="935" width="200" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="persona3" value="ðŸ‘¤ App Support (L2)&#xa;Namespace Editor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1300" y="880" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="persona3-desc" value="â€¢ App troubleshooting&#xa;â€¢ Pod exec &amp; logs&#xa;â€¢ Scale &amp; restart" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1300" y="935" width="200" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="persona4" value="ðŸ‘¤ Command Centre (L1)&#xa;Namespace Viewer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="1000" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="persona4-desc" value="â€¢ Read-only monitoring&#xa;â€¢ View logs &amp; events&#xa;â€¢ Escalate to L2" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="860" y="1055" width="200" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="persona5" value="ðŸ‘¤ Cloud Deployment&#xa;Deployer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1000" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="persona5-desc" value="â€¢ CI/CD deployments&#xa;â€¢ Config updates&#xa;â€¢ Rollback support" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1055" width="200" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="persona6" value="ðŸ‘¤ Cluster Viewer&#xa;Read-Only" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1300" y="1000" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="persona6-desc" value="â€¢ Monitoring dashboards&#xa;â€¢ Resource visibility&#xa;â€¢ Standing access (no JIT)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1300" y="1055" width="200" height="45" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="840" y="80" width="720" height="120" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="860" y="90" width="100" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend1" value="ðŸ”´" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="860" y="120" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend1-text" value="Cluster Admin (L2/L3) - Full cluster access + kube-system" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="895" y="120" width="450" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend2" value="ðŸŸ¡" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="860" y="145" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend2-text" value="Namespace-Scoped (L1/L2) - Application namespaces only, no kube-system" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="895" y="145" width="450" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend3" value="ðŸŸ¢" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="860" y="170" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend3-text" value="Standing Access - No JIT required (read-only visibility only)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="895" y="170" width="450" height="20" as="geometry" />
        </mxCell>
        
        <!-- Security Features Box -->
        <mxCell id="security-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="840" y="240" width="720" height="160" as="geometry" />
        </mxCell>
        <mxCell id="security-title" value="ðŸ”’ Security Features" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="860" y="250" width="200" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="security-feat" value="âœ… Entra ID Integration (all authentication)&#xa;âœ… Group-Based Access (no individual assignments)&#xa;âœ… JIT Elevation via PIM (4-8 hour max)&#xa;âœ… Namespace Isolation (apps blocked from system)&#xa;âœ… No Wildcard Permissions (explicit verbs only)&#xa;âœ… Comprehensive Audit Logging (90-day retention)&#xa;âœ… Local Accounts Disabled (AAD enforced)&#xa;âœ… Secrets Read-Only (L2 support cannot modify)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="285" width="680" height="105" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
